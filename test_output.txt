🚀 Testing Cookie-based Auth
===============================

1️⃣  Login Test
Endpoint: http://localhost:8000/api/auth/login
* Host localhost:8000 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8000...
*   Trying 127.0.0.1:8000...
* Connected to localhost (127.0.0.1) port 8000
* using HTTP/1.x
> POST /api/auth/login HTTP/1.1
> Host: localhost:8000
> User-Agent: curl/8.11.0
> Accept: */*
> Content-Type: application/json
> Content-Length: 57
> 
} [57 bytes data]
* upload completely sent off: 57 bytes
< HTTP/1.1 200 OK
< Host: localhost:8000
< Connection: close
< X-Powered-By: PHP/8.2.12
< Cache-Control: no-cache, private
< Date: Thu, 25 Sep 2025 04:14:08 GMT
< Content-Type: application/json
< Access-Control-Allow-Origin: http://localhost:4200
< Access-Control-Allow-Credentials: true
* Added cookie refresh_token="322b5f8da278564df29abfb2685f385390624cd445380dc01e863ad06790b80d" for domain localhost, path /, expire 1761365648
< Set-Cookie: refresh_token=322b5f8da278564df29abfb2685f385390624cd445380dc01e863ad06790b80d; expires=Sat, 25 Oct 2025 04:14:08 GMT; Max-Age=2592000; path=/; domain=localhost; httponly; samesite=lax
< 
{ [990 bytes data]
100  1047    0   990  100    57    943     54  0:00:01  0:00:01 --:--:--   998100  1047    0   990  100    57    939     54  0:00:01  0:00:01 --:--:--   994{"status":"success","message":"Login successful","data":{"user":{"id":"URM9ICF9DN","name":"Administrator","email":"admin@restaurant.com","email_verified_at":null,"status":1,"avatar":null,"role_id":"RV0XHVPPIZ","created_at":"2025-09-25T02:06:25.000000Z","updated_at":"2025-09-25T02:06:25.000000Z","role":{"id":"RV0XHVPPIZ","name":"Administrator","description":"Administrative access with most permissions","is_active":true,"created_at":"2025-09-25T02:06:24.000000Z","updated_at":"2025-09-25T02:06:24.000000Z"}},"access_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgwMDAvYXBpL2F1dGgvbG9naW4iLCJpYXQiOjE3NTg3NzM2NDgsImV4cCI6MTc1ODc3NzI0OCwibmJmIjoxNzU4NzczNjQ4LCJqdGkiOiJWeE9CRjBEQmV2eUw1ZURMIiwic3ViIjoiVVJNOUlDRjlETiIsInBydiI6IjIzYmQ1Yzg5NDlmNjAwYWRiMzllNzAxYzQwMDg3MmRiN2E1OTc2ZjciLCJlbWFpbCI6ImFkbWluQHJlc3RhdXJhbnQuY29tIiwicm9sZV9pZCI6IlJWMFhIVlBQSVoiLCJzdGF0dXMiOjF9.BOFJGn5g374mjCUzbP4R8A9YfbZAJYRsplkOhYfADac","token_type":"Bearer","expires_in":3600}}
* shutting down connection #0

2️⃣  Cookie file contents:
# Netscape HTTP Cookie File
# https://curl.se/docs/http-cookies.html
# This file was generated by libcurl! Edit at your own risk.

#HttpOnly_.localhost	TRUE	/	FALSE	1761365648	refresh_token	322b5f8da278564df29abfb2685f385390624cd445380dc01e863ad06790b80d

3️⃣  Refresh Test
* Host localhost:8000 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8000...
*   Trying 127.0.0.1:8000...
* Connected to localhost (127.0.0.1) port 8000
* using HTTP/1.x
> POST /api/auth/refresh HTTP/1.1
> Host: localhost:8000
> User-Agent: curl/8.11.0
> Accept: */*
> Cookie: refresh_token=322b5f8da278564df29abfb2685f385390624cd445380dc01e863ad06790b80d
> Content-Type: application/json
> 
* Request completely sent off
< HTTP/1.1 200 OK
< Host: localhost:8000
< Connection: close
< X-Powered-By: PHP/8.2.12
< Cache-Control: no-cache, private
< Date: Thu, 25 Sep 2025 04:14:09 GMT
< Content-Type: application/json
< Access-Control-Allow-Origin: http://localhost:4200
< Access-Control-Allow-Credentials: true
* Replaced cookie refresh_token="7e545d147694e631f16d24e9554688b0f823a6e69a8027c0dce905f3c26d6b2c" for domain localhost, path /, expire 1761365649
< Set-Cookie: refresh_token=7e545d147694e631f16d24e9554688b0f823a6e69a8027c0dce905f3c26d6b2c; expires=Sat, 25 Oct 2025 04:14:09 GMT; Max-Age=2592000; path=/; domain=localhost; httponly; samesite=lax
< 
{ [1005 bytes data]
100  1005    0  1005    0     0   1542      0 --:--:-- --:--:-- --:--:--  1541100  1005    0  1005    0     0   1535      0 --:--:-- --:--:-- --:--:--  1534{"status":"success","message":"Token refreshed successfully","data":{"user":{"id":"URM9ICF9DN","name":"Administrator","email":"admin@restaurant.com","email_verified_at":null,"status":1,"avatar":null,"role_id":"RV0XHVPPIZ","created_at":"2025-09-25T02:06:25.000000Z","updated_at":"2025-09-25T02:06:25.000000Z","role":{"id":"RV0XHVPPIZ","name":"Administrator","description":"Administrative access with most permissions","is_active":true,"created_at":"2025-09-25T02:06:24.000000Z","updated_at":"2025-09-25T02:06:24.000000Z"}},"access_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgwMDAvYXBpL2F1dGgvcmVmcmVzaCIsImlhdCI6MTc1ODc3MzY0OSwiZXhwIjoxNzU4Nzc3MjQ5LCJuYmYiOjE3NTg3NzM2NDksImp0aSI6IlNsbnBHUmZONjF0OVFFUjkiLCJzdWIiOiJVUk05SUNGOUROIiwicHJ2IjoiMjNiZDVjODk0OWY2MDBhZGIzOWU3MDFjNDAwODcyZGI3YTU5NzZmNyIsImVtYWlsIjoiYWRtaW5AcmVzdGF1cmFudC5jb20iLCJyb2xlX2lkIjoiUlYwWEhWUFBJWiIsInN0YXR1cyI6MX0.5rWZ_Cgjhvsil1pQ7qJqBlI6_niJTc9lhpIxSW0gUtc","token_type":"Bearer","expires_in":3600}}
* shutting down connection #0

✅ Test completed! Full output is saved in test_output.txt
